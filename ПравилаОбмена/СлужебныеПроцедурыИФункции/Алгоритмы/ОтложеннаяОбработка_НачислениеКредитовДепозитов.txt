Процедура ОтложеннаяОбработка_НачислениеКредитовДепозитов(Объект, КомпонентыОбмена)
	Партнер = Неопределено;
	
	Для Каждого Строка Из Объект.Начисления Цикл
		
		Партнер = ДенежныеСредстваСервер.ПолучитьПартнераПоКонтрагенту(Строка.Контрагент);
	
		Если Не ЗначениеЗаполнено(Партнер) Тогда
			Партнер = Справочники.Партнеры.НеизвестныйПартнер;
		КонецЕсли;
		
		Если Не ЗначениеЗаполнено(Строка.Партнер)
			Или Строка.Партнер <> Партнер Тогда
			Строка.Партнер = Партнер;
		КонецЕсли;
		
		Если НЕ ЗначениеЗаполнено(Строка.Подразделение) Тогда
			Подразделение = Неопределено;
			Если ЗначениеЗаполнено(Строка.Договор) Тогда
				Подразделение = ОбщегоНазначения.ЗначениеРеквизитаОбъекта(Строка.Договор, "Подразделение");
			КонецЕсли;
			Если НЕ ЗначениеЗаполнено(Подразделение) Тогда
		    	Подразделение = ЭлементПоУмолчанию(КомпонентыОбмена, "Подразделение");
		    КонецЕсли;
		    
		    Строка.Подразделение = Подразделение;
		КонецЕсли;
		
	КонецЦикла;
КонецПроцедуры
