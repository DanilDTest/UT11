Процедура ЗаписатьОшибкуВЖурналРегистрации(СсылкаНаОбъект, ОписаниеОшибки, КомпонентыОбмена, ОписаниеДействия = Неопределено, Уровень = Неопределено)
	// Процедура вызывается из исключений, при попытке записать или заблокировать объект в ИБ.
	
	Если ОписаниеДействия = Неопределено Тогда
		ОписаниеДействия = НСтр("ru = 'создать объект';
								|en = 'create an object'");
	КонецЕсли;
	
	ТекстОшибки = НСтр("ru = 'Не удалось %1 %2.
							|%3';
							|en = 'Cannot %1 %2.
							|%3'");
	ТекстОшибки = СтроковыеФункцииКлиентСервер.ПодставитьПараметрыВСтроку(ТекстОшибки,
					ОписаниеДействия, СсылкаНаОбъект.Метаданные().Синоним, ОписаниеОшибки);
	
	Если Уровень = Неопределено Тогда
		Уровень = УровеньЖурналаРегистрации.Информация;
	КонецЕсли;
	
	RM_ОбменДаннымиXDTOСервер.ЗаписьЖурналаРегистрацииОбменДанными(ТекстОшибки, КомпонентыОбмена, Уровень, СсылкаНаОбъект);
КонецПроцедуры
