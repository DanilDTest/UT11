Процедура ОтложеннаяОбработка_СФКомиссионеру(Объект, КомпонентыОбмена)
	Если ЗначениеЗаполнено(Объект.ДокументОснование)
		И ОбщегоНазначения.СсылкаСуществует(Объект.ДокументОснование)
		И ТипЗнч(Объект.ДокументОснование) = Тип("ДокументСсылка.ОтчетКомиссионера") Тогда
		
		ДанныеОснования = ОбщегоНазначения.ЗначенияРеквизитовОбъекта(Объект.ДокументОснование,
			"Контрагент, Партнер, Подразделение, НаправлениеДеятельности, Договор");
		
		Если НЕ Объект.Комиссионер = ДанныеОснования.Контрагент Тогда
			Объект.Комиссионер = ДанныеОснования.Контрагент;
		КонецЕсли;
		
		Для Каждого ЭлементСтруктуры Из ДанныеОснования Цикл
			Если ЗначениеЗаполнено(ЭлементСтруктуры.Значение)
				И НЕ Объект[ЭлементСтруктуры.Ключ] = ЭлементСтруктуры.Значение Тогда
				Объект[ЭлементСтруктуры.Ключ] = ЭлементСтруктуры.Значение;
			КонецЕсли;
		КонецЦикла
	КонецЕсли;
	
	ЗаполнениеПартнераВШапкеДокумента(Объект);
КонецПроцедуры
