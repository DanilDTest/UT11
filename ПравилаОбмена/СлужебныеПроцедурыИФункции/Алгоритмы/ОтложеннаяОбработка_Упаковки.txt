Процедура ОтложеннаяОбработка_Упаковки(Объект, КомпонентыОбмена)
	//Если ТипЗнч(Объект.Владелец) = Тип("СправочникСсылка.Номенклатура") Тогда
		//НаборУпаковок = ОбщегоНазначения.ЗначениеРеквизитаОбъекта(Объект.Владелец, "НаборУпаковок");
		//Если НЕ ЗначениеЗаполнено(НаборУпаковок) Тогда
		//	НоменклатураОбъект = Объект.Владелец.ПолучитьОбъект();
		//	НоменклатураОбъект.ИспользоватьУпаковки = Истина;
		//	НоменклатураОбъект.НаборУпаковок = Справочники.НаборыУпаковок.ИндивидуальныйДляНоменклатуры;
		//	
		//	НоменклатураОбъект.ОбменДанными.Загрузка = Истина;
		//	Попытка
		//		НоменклатураОбъект.Записать();
		//	Исключение
		//		ЗаписатьОшибкуВЖурналРегистрации(НоменклатураОбъект.Ссылка,
		//			ПодробноеПредставлениеОшибки(ИнформацияОбОшибке()), КомпонентыОбмена);
		//	КонецПопытки;	
		//КонецЕсли;
	//КонецЕсли;  
	
	
	ЕдиницаДлины = Константы.ЕдиницаИзмеренияДлины.Получить();
				
	Объект.ГлубинаЕдиницаИзмерения = ЕдиницаДлины;
	Объект.ШиринаЕдиницаИзмерения  = ЕдиницаДлины;
	Объект.ВысотаЕдиницаИзмерения  = ЕдиницаДлины;
				
	Объект.ОбъемЕдиницаИзмерения   = Константы.ЕдиницаИзмеренияОбъема.Получить();
	Объект.ВесЕдиницаИзмерения     = Константы.ЕдиницаИзмеренияВеса.Получить();         
	
	Объект.ОбновитьВариантыПереупаковки(); 
	                                                        
	Если ТипЗнч(Объект.Владелец) = Тип("СправочникСсылка.Номенклатура")
		И ОбщегоНазначения.СсылкаСуществует(Объект.Владелец) Тогда
		ВесометрикаТипоразмера = Новый Структура("Высота, Ширина, Глубина, Объем, Безразмерная");  
		
		ТипоразмерСоздан = ЗначениеЗаполнено(Объект.Типоразмер); 
		Если ТипоразмерСоздан Тогда
			ВесометрикаТипоразмера = ОбщегоНазначения.ЗначенияРеквизитовОбъекта(Объект.Типоразмер, "Высота, Ширина, Глубина, Объем, Безразмерная"); 
		КонецЕсли;
		
		ОбновитьТипоразмер = Ложь;
		Если НЕ (Объект.Высота = ВесометрикаТипоразмера.Высота
			И Объект.Ширина = ВесометрикаТипоразмера.Ширина 
			И Объект.Глубина = ВесометрикаТипоразмера.Глубина
			И Объект.Объем = ВесометрикаТипоразмера.Объем
			И Объект.Безразмерная = ВесометрикаТипоразмера.Безразмерная) Тогда 
			
			ОбновитьТипоразмер = Истина;
			
		КонецЕсли;       
		
		Если ОбновитьТипоразмер Тогда
			
			Если ТипоразмерСоздан Тогда 
				ТипоразмерОбъект = Объект.Типоразмер.ПолучитьОбъект();	
			Иначе
				ТипоразмерОбъект = Справочники.ТипоразмерыУпаковок.СоздатьЭлемент();
			КонецЕсли;                      
			
			НаименованиеТипоразмера = ТипоразмерОбъект.Наименование;
			ЗаполнитьЗначенияСвойств(ТипоразмерОбъект, Объект, "Высота,Глубина,Ширина,Объем,ВысотаЕдиницаИзмерения,ГлубинаЕдиницаИзмерения,ШиринаЕдиницаИзмерения,ОбъемЕдиницаИзмерения, Безразмерная"); 
			
			НаименованиеТипоразмера = СтрШаблон("%1 %2", ОбщегоНазначения.ЗначениеРеквизитаОбъекта(Объект.Владелец, "Артикул"), Объект.Наименование);
				
			ТипоразмерОбъект.Наименование = НаименованиеТипоразмера;
			ТипоразмерОбъект.Записать();
			
			Объект.Типоразмер = ТипоразмерОбъект.Ссылка;
			
		КонецЕсли;        
	КонецЕсли;
КонецПроцедуры
