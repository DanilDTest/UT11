Процедура ОтложеннаяОбработка_ДокументыДвиженияНаличныхДС(Объект, КомпонентыОбмена)
	// Заполнение аналитики по партнеру при необходимости.
	Если Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ПоступлениеОплатыОтКлиента
		Или Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ВозвратДенежныхСредствОтПоставщика
		Или Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ОплатаПоставщику
		Или Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ВозвратОплатыКлиенту Тогда
		ЗаполнениеПартнераВРасшифровкеПлатежа(Объект);
		Если ОбщегоНазначения.ЕстьРеквизитОбъекта("Партнер", Объект.Метаданные()) Тогда
			ЗаполнениеПартнераВШапкеДокумента(Объект);
		КонецЕсли;
		
		ИменаПроверяемыхКолонок = "Заказ";
		Если ТипЗнч(Объект) = Тип("ДокументОбъект.ПриходныйКассовыйОрдер") Тогда
			ИменаПроверяемыхКолонок = ИменаПроверяемыхКолонок + ",ОснованиеПлатежа";
		КонецЕсли;
		ОчиститьНесуществующиеСсылкиВТЧ(Объект, "РасшифровкаПлатежа", ИменаПроверяемыхКолонок);
		
		ДобавитьПервичныеДокументыТЧВОтложеннуюОбработку(Объект, КомпонентыОбмена);
		
	КонецЕсли;
	
	Если НЕ ЗначениеЗаполнено(Объект.СтатьяДвиженияДенежныхСредств)
		И Объект.РасшифровкаПлатежа.Количество() > 0 Тогда
		Объект.СтатьяДвиженияДенежныхСредств = Объект.РасшифровкаПлатежа[0].СтатьяДвиженияДенежныхСредств;
	КонецЕсли;
	
	
	Если Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ВнутренняяПередачаДенежныхСредств Тогда
		Если ЗначениеЗаполнено(Объект.ДокументОснование)
			И ТипЗнч(Объект.ДокументОснование) = Тип("ДокументСсылка.РасходныйКассовыйОрдер") Тогда
			
			Объект.Касса = Объект.ДокументОснование.КассаПолучатель;
			Объект.КассаОтправитель = Объект.ДокументОснование.Касса;
	
			Объект.СтатьяДвиженияДенежныхСредств = Объект.ДокументОснование.СтатьяДвиженияДенежныхСредств;
		КонецЕсли;
		Если Не ЗначениеЗаполнено(Объект.Касса) Тогда
			ПараметрыОтбора = Новый Структура(
				"Валюта,Организация,Подразделение",
				Объект.Валюта,
				Объект.Организация,
				Справочники.СтруктураПредприятия.ПустаяСсылка());
			
			Объект.Касса = КассаПоУмолчанию(ПараметрыОтбора, КомпонентыОбмена);
		КонецЕсли;
		Если Не ЗначениеЗаполнено(Объект.СтатьяДвиженияДенежныхСредств) Тогда
			Объект.СтатьяДвиженияДенежныхСредств =
				ЗначениеНастроекПовтИсп.ПолучитьСтатьюДвиженияДенежныхСредств(Объект.ХозяйственнаяОперация);
		КонецЕсли;
	Иначе
	//	ЗаполнитьКассуПоВалютеИОрганизации(Объект, КомпонентыОбмена);
	//
	//	Если Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ПоступлениеДенежныхСредствИзКассыККМ
	//		ИЛИ Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ВыдачаДенежныхСредствВКассуККМ Тогда
	//		ЗаполнитьКассуККМПоВалютеПодразделениюИОрганизации(Объект);	
	//	Иначе
	//		ЗаполнениеСтатьиДДСВДокументе(Объект);
	//		ЗаполнитьТаблицуСтатьиДДСИХозОперации(Объект, КомпонентыОбмена.ПараметрыКонвертации.ЗагруженныеСтатьиДДСИХозОперации);
	//	КонецЕсли;
	КонецЕсли;
	
	Если ЗначениеЗаполнено(Объект.Подразделение) Тогда
		Для Каждого СтрокаРасшифровкаПлатежа Из Объект.РасшифровкаПлатежа Цикл
			Если Не ЗначениеЗаполнено(СтрокаРасшифровкаПлатежа.Подразделение) Тогда
				СтрокаРасшифровкаПлатежа.Подразделение = Объект.Подразделение;	
			КонецЕсли;	
		КонецЦикла;
	КонецЕсли;
КонецПроцедуры
