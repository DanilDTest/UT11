Процедура ОбработатьСтавкуНДСПриПолучении(СтрокаXDTO, СтруктураДанныхСтроки, ПолученныеДанные, ПараметрыКонвертации)
	КонтрагентСсылка = ПолученныеДанные.Контрагент;
	
	Если НЕ ЗначениеЗаполнено(СтрокаXDTO.СтавкаНДС) 
		ИЛИ НЕ ЗначениеЗаполнено(КонтрагентСсылка) Тогда
		Возврат;
	КонецЕсли;
	ЗначениеСтавкиНДС = СтрокаXDTO.СтавкаНДС.Значение;
	Если ЗначениеСтавкиНДС = "НДС2" Тогда
		СтруктураДанныхСтроки.СтавкаНДС = Перечисления.СтавкиНДС.НДС10;
	ИначеЕсли ЗначениеСтавкиНДС = "НДС2_102" Тогда
		СтруктураДанныхСтроки.СтавкаНДС = Перечисления.СтавкиНДС.НДС10_110;
	ИначеЕсли ЗначениеСтавкиНДС = "НДС4" Тогда
		Если ПолученныеДанные.Дата >= Дата("20190101") Тогда
		    СтруктураДанныхСтроки.СтавкаНДС = Перечисления.СтавкиНДС.НДС20;
		Иначе
	    	СтруктураДанныхСтроки.СтавкаНДС = Перечисления.СтавкиНДС.НДС18;
	    КонецЕсли;
	ИначеЕсли ЗначениеСтавкиНДС = "НДС4_102" Тогда
		Если ПолученныеДанные.Дата >= Дата("20190101") Тогда
		    СтруктураДанныхСтроки.СтавкаНДС = Перечисления.СтавкиНДС.НДС20_120;
		Иначе
	    	СтруктураДанныхСтроки.СтавкаНДС = Перечисления.СтавкиНДС.НДС18_118;
	    КонецЕсли;
	Иначе
		Возврат;
	КонецЕсли;
	Если ПараметрыКонвертации.ПоставщикиЛьготнаяСтавкаНДС.Найти(КонтрагентСсылка) = Неопределено Тогда
		ПараметрыКонвертации.ПоставщикиЛьготнаяСтавкаНДС.Добавить(КонтрагентСсылка);
	КонецЕсли;
КонецПроцедуры
