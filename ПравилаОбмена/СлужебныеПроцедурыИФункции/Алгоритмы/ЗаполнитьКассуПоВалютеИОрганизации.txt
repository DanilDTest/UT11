Процедура ЗаполнитьКассуПоВалютеИОрганизации(ПолученныеДанные, КомпонентыОбмена, НаименованиеПодразделения = "")
	Если ЗначениеЗаполнено(НаименованиеПодразделения) Тогда
		Подразделение = Справочники.СтруктураПредприятия.НайтиПоНаименованию(НаименованиеПодразделения);
	Иначе
		Подразделение = Справочники.СтруктураПредприятия.ПустаяСсылка();
	КонецЕсли;
		
	РеквизитыКассы = ОбщегоНазначения.ЗначенияРеквизитовОбъекта(ПолученныеДанные.Касса, "ВалютаДенежныхСредств, Владелец, Подразделение");
	
	Если РеквизитыКассы.ВалютаДенежныхСредств <> ПолученныеДанные.Валюта 
		Или РеквизитыКассы.Владелец <> ПолученныеДанные.Организация
		Или ?(ЗначениеЗаполнено(Подразделение), РеквизитыКассы.Подразделение <> Подразделение,Ложь) Тогда
		
		ПараметрыОтбора = Новый Структура(
			"Валюта,Организация,Подразделение",
			ПолученныеДанные.Валюта,
			ПолученныеДанные.Организация,
			Подразделение);
		
		ПолученныеДанные.Касса = КассаПоУмолчанию(ПараметрыОтбора, КомпонентыОбмена);
		
	КонецЕсли;
КонецПроцедуры
