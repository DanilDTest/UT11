Процедура ПКО_Документ_RM_Приемка_Получение_ПриКонвертацииДанныхXDTO(ДанныеXDTO, ПолученныеДанные, КомпонентыОбмена)
	#Область Товары
	
	
	Если ДанныеXDTO.Свойство("Товары") Тогда   
		
		ПравилаЗаполнения = Новый Соответствие;
		ПравилаЗаполнения.Вставить("Номенклатура", "Номенклатура");     
		ПравилаЗаполнения.Вставить("Ключ", "Ключ");
		ПравилаЗаполнения.Вставить("КоличествоПлан", "КоличествоПлан");
		ПравилаЗаполнения.Вставить("КоличествоФакт", "КоличествоФакт");
		ПравилаЗаполнения.Вставить("Упаковка", "Упаковка");
		ПравилаЗаполнения.Вставить("Характеристика", "Характеристика");
		
		
		
		МассивСтрокТовары = Новый Массив;
		Для Каждого Строка Из ДанныеXDTO.Товары Цикл
			СтруктураДанныхСтроки = ДанныеКоллекцииВВидеСтруктуры(Строка, ПравилаЗаполнения);
			 
			
			Если НЕ ПустаяСтрока(СтруктураДанныхСтроки.Ключ) Тогда
				СтруктураДанныхСтроки.Ключ = Новый УникальныйИдентификатор(СтруктураДанныхСтроки.Ключ);
			КонецЕсли;
			МассивСтрокТовары.Добавить(СтруктураДанныхСтроки);  
		КонецЦикла;
		ПолученныеДанные.ДополнительныеСвойства.Вставить("Товары", МассивСтрокТовары);
	КонецЕсли;
	#КонецОбласти   
	
	
	Если ДанныеXDTO.Свойство("ДокументОснование") 
		И ТипЗнч(ДанныеXDTO.ДокументОснование) = Тип("Структура") И ДанныеXDTO.ДокументОснование.Свойство("Ссылка") Тогда
		
		ИмяЗначения = ДанныеXDTO.ДокументОснование.Ссылка.ТипЗначенияXDTO.Имя; 
		ИмяПКО = "";
		
		Если ИмяЗначения = "ДокументСсылка.ЗаказПоставщику" Тогда
			ИмяПКО = "";
		ИначеЕсли ИмяЗначения = "ДокументСсылка.ПеремещениеТоваров" Тогда 
			ИмяПКО = "Документ_ПеремещениеТоваров_Получение";    
		ИначеЕсли ИмяЗначения = "ДокументСсылка.ЗаказНаПеремещение" Тогда 
			ИмяПКО = "Документ_ЗаказНаПеремещение_Получение";
	
		КонецЕсли;    
		
		Если НЕ ИмяПКО = "" Тогда
		    СсылкаОснование = RM_ОбменДаннымиXDTOСервер.СтруктураОбъектаXDTOВДанныеИБ(
					КомпонентыОбмена,
					ДанныеXDTO.ДокументОснование,
					RM_ОбменДаннымиXDTOСервер.ПКОПоИмени(КомпонентыОбмена, ИмяПКО),
					"ПолучитьСсылку");       
					
			ПолученныеДанные.ДокументОснование = СсылкаОснование;				
		КонецЕсли;
	 	                                     
		
	КонецЕсли;
КонецПроцедуры
