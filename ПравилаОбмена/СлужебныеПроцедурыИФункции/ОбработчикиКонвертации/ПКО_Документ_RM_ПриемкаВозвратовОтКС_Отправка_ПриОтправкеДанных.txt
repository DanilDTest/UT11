Процедура ПКО_Документ_RM_ПриемкаВозвратовОтКС_Отправка_ПриОтправкеДанных(ДанныеИБ, ДанныеXDTO, КомпонентыОбмена, СтекВыгрузки)
	Если СтекВыгрузки.Количество() > 1 Тогда
		Возврат;
	КонецЕсли;
	
	Запрос = Новый Запрос;
	Запрос.Текст = 
	"ВЫБРАТЬ
	|	RM_ИсторияСтатусовПриемкиВозвратовОтКС.Период КАК Период,
	|	RM_ИсторияСтатусовПриемкиВозвратовОтКС.ПриемкаВозвратовОтКС КАК ПриемкаВозвратовОтКС,
	|	RM_ИсторияСтатусовПриемкиВозвратовОтКС.Статус КАК Статус,
	|	RM_ИсторияСтатусовПриемкиВозвратовОтКС.Ответственный КАК Ответственный,
	|	RM_ИсторияСтатусовПриемкиВозвратовОтКС.ДокументРегистратор КАК ДокументРегистратор,
	|	RM_ИсторияСтатусовПриемкиВозвратовОтКС.Комментарий КАК Комментарий
	|ИЗ
	|	РегистрСведений.RM_ИсторияСтатусовПриемкиВозвратовОтКС КАК RM_ИсторияСтатусовПриемкиВозвратовОтКС
	|ГДЕ
	|	RM_ИсторияСтатусовПриемкиВозвратовОтКС.ПриемкаВозвратовОтКС = &ПриемкаВозвратовОтКС";
	
	Запрос.УстановитьПараметр("ПриемкаВозвратовОтКС", ДанныеИБ.Ссылка);
	
	РезультатЗапроса = Запрос.Выполнить();
	Выборка = РезультатЗапроса.Выбрать();   
	
	ПравилоОбработкиСтатусы = КомпонентыОбмена.ПравилаОбработкиДанных.Найти("Справочник_RM_ИсторияСтатусовПриемкиВозвратовОтКС_Отправка", "Имя");
	Пока Выборка.Следующий() Цикл  
		НабЗап = РегистрыСведений.RM_ИсторияСтатусовПриемкиВозвратовОтКС.СоздатьНаборЗаписей();
		НабЗап.Отбор.Период.Установить(Выборка.Период);
		НабЗап.Отбор.ПриемкаВозвратовОтКС.Установить(Выборка.ПриемкаВозвратовОтКС);   
		
		Запись = НабЗап.Добавить();
		ЗаполнитьЗначенияСвойств(Запись, Выборка);
		
		RM_ОбменДаннымиXDTOСервер.ВыгрузкаОбъектаВыборки(КомпонентыОбмена, НабЗап, ПравилоОбработкиСтатусы);
	КонецЦикла;
КонецПроцедуры
