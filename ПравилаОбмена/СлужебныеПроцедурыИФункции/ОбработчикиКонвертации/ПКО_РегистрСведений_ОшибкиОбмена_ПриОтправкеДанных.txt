Процедура ПКО_РегистрСведений_ОшибкиОбмена_ПриОтправкеДанных(ДанныеИБ, ДанныеXDTO, КомпонентыОбмена, СтекВыгрузки)
	//Если ВерсияФорматаЧислом(КомпонентыОбмена.ВерсияФорматаОбмена) >= ВерсияФорматаЧислом("1.7") Тогда
		ДанныеXDTO.Вставить("УниверсальнаяДатаОшибки", ДанныеИБ.Отбор.УниверсальнаяДатаОшибки.Значение);
		ДанныеXDTO.Вставить("БазаВозникновенияОшибки", ДанныеИБ.Отбор.БазаВозникновенияОшибки.Значение);
		ДанныеXDTO.Вставить("БазаИсточникСообщения", ДанныеИБ.Отбор.БазаИсточникСообщения.Значение);
	//КонецЕсли;
	
	ТаблицаЗаписи = ДанныеИБ.Выгрузить();
	
	Для каждого Запись из ТаблицаЗаписи Цикл
		Если ТипЗнч(Запись.ИсходящееСообщение) <> Тип("Строка") Тогда
			Запись.ИсходящееСообщение = Строка(Запись.ИсходящееСообщение.УникальныйИдентификатор());
		КонецЕсли;
	КонецЦикла;
	
	//ЗаполнитьХарактеристикуУпаковкуВТЧ(КомпонентыОбмена, ТаблицаЗаписи);
	
	ДанныеXDTO.Вставить("Записи", ТаблицаЗаписи);
КонецПроцедуры
