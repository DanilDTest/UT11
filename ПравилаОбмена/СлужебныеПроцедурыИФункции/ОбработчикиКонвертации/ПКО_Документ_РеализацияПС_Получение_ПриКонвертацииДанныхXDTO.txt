Процедура ПКО_Документ_РеализацияПС_Получение_ПриКонвертацииДанныхXDTO(ДанныеXDTO, ПолученныеДанные, КомпонентыОбмена)
	Если Не (ДанныеXDTO.Свойство("СерийныеНомера") И ЗначениеЗаполнено(ДанныеXDTO.СерийныеНомера)) Тогда
		Возврат;
	КонецЕсли;
	
	
	ПолученныеДанные.Статус = Перечисления.СтатусыЧековККМ.Пробит;
	ДобавитьВалютуВДопСвойства(ПолученныеДанные, ДанныеXDTO);
	
	ЗагрузитьДополнительныеРеквизиты(ПолученныеДанные, ДанныеXDTO, КомпонентыОбмена);
	
	// ПодарочныеСертификаты
	МассивСтрокТовары = Новый Массив;
	
	Если ДанныеXDTO.Свойство("СерийныеНомера")
		И ЗначениеЗаполнено(ДанныеXDTO.СерийныеНомера) Тогда
		
		Для Каждого Строка Из ДанныеXDTO.СерийныеНомера Цикл
		
			СтруктураДанныхСтроки = Новый Структура;
			СтруктураДанныхСтроки.Вставить("Сумма", Строка.Сумма);
			СтруктураДанныхСтроки.Вставить("ПодарочныйСертификат", Строка.СертификатСсылка);
					МассивСтрокТовары.Добавить(СтруктураДанныхСтроки);
			
		КонецЦикла;
	КонецЕсли;
	
	ПолученныеДанные.ДополнительныеСвойства.Вставить("ПодарочныеСертификаты", МассивСтрокТовары);
	
	// ПлатежныеКарты.
	МассивСтрокОплатаПК = Новый Массив;
	
	Если ДанныеXDTO.Свойство("ОплатаКартами")
		И ЗначениеЗаполнено(ДанныеXDTO.ОплатаКартами) Тогда
		
		Для Каждого Строка Из ДанныеXDTO.ОплатаКартами Цикл
			СтруктураДанныхСтроки = Новый Структура;
			СтруктураДанныхСтроки.Вставить("Сумма", Строка.СуммаОплаты);
			СтруктураДанныхСтроки.Вставить("НомерПлатежнойКарты", Строка.НомерКарты);
		    СтруктураДанныхСтроки.Вставить("ЭквайринговыйТерминал", Строка.ЭквайринговыйТерминал);
			
			МассивСтрокОплатаПК.Добавить(СтруктураДанныхСтроки);
			
		КонецЦикла;
		
		ПолученныеДанные.ДополнительныеСвойства.Вставить("ОплатаПлатежнымиКартами", МассивСтрокОплатаПК);
	КонецЕсли;
КонецПроцедуры
