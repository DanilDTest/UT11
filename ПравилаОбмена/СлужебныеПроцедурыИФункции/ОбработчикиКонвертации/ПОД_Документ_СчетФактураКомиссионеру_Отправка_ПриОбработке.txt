Процедура ПОД_Документ_СчетФактураКомиссионеру_Отправка_ПриОбработке(ДанныеИБ, ИспользованиеПКО, КомпонентыОбмена)
	ИспользованиеПКО.Документ_СчетФактураКомиссионеру_Отправка = Истина;
	ИспользованиеПКО.Документ_СчетФактураПолученныйИКК_Отправка = Ложь;
	
	ДокументОснование = ДанныеИБ.ДокументОснование;
	
	Если НЕ ПроверитьДокументОснование(ДанныеИБ, ДокументОснование, ИспользованиеПКО, КомпонентыОбмена) Тогда
		Возврат;
	КонецЕсли;
	
	ТипОснования = ТипЗнч(ДокументОснование);
	Если (ТипОснования = Тип("ДокументСсылка.ПередачаТоваровМеждуОрганизациями")
		Или ТипОснования = Тип("ДокументСсылка.ВозвратТоваровМеждуОрганизациями")
		Или ТипОснования = Тип("ДокументСсылка.ОтчетПоКомиссииМеждуОрганизациями"))
		И Не ОбщегоНазначения.ЗначениеРеквизитаОбъекта(ДокументОснование, "РасчетыЧерезОтдельногоКонтрагента") Тогда
		
		Если КомпонентыОбмена.ПараметрыКонвертации.ИспользоватьОтборПоОрганизациям Тогда
			Если ТипОснования = Тип("ДокументСсылка.ОтчетПоКомиссииМеждуОрганизациями") Тогда
				ОрганизацияПолучатель = ОбщегоНазначения.ЗначениеРеквизитаОбъекта(ДокументОснование, "Комиссионер");
			Иначе
				ОрганизацияПолучатель = ОбщегоНазначения.ЗначениеРеквизитаОбъекта(ДокументОснование, "ОрганизацияПолучатель");
		    КонецЕсли;
			УзелСписокОрганизаций = КомпонентыОбмена.ПараметрыКонвертации.Организации;
			
			ИспользованиеПКО.Документ_СчетФактураКомиссионеру_Отправка  = УзелСписокОрганизаций.НайтиПоЗначению(ДанныеИБ.Организация) <> Неопределено;
			ИспользованиеПКО.Документ_СчетФактураПолученныйИКК_Отправка = УзелСписокОрганизаций.НайтиПоЗначению(ОрганизацияПолучатель) <> Неопределено;
		Иначе
			ИспользованиеПКО.Документ_СчетФактураПолученныйИКК_Отправка = Истина;
		КонецЕсли;
	
	КонецЕсли;
	
	ПроверкаЗаполненияРеквизитовОбъектаИБ(ДанныеИБ, КомпонентыОбмена, ИспользованиеПКО);
КонецПроцедуры
