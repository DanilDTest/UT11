Процедура ПОД_Справочник_ИнформативныеОстатки_Отправка_ПриОбработке(ДанныеИБ, ИспользованиеПКО, КомпонентыОбмена)
	Если ВерсияФорматаЧислом(КомпонентыОбмена.ВерсияФорматаОбмена) < ВерсияФорматаЧислом("1.7") Тогда
		ИспользованиеПКО.Очистить();
	Иначе
		
		ВыгружатьИнформОстатки = КомпонентыОбмена.УзелКорреспондента.ВыгружатьИнформативныеОстатки;
		Склады                 = КомпонентыОбмена.УзелКорреспондента.СкладыИнформативныхОстатков.Выгрузить();
			
		Если Не ВыгружатьИнформОстатки 
			Или Склады.Найти(ДанныеИБ.Отбор.Склад.Значение) = Неопределено Тогда 
			
			ИспользованиеПКО.Очистить();
		Иначе
	
			Отбор = Новый Структура();
			Отбор.Вставить("Период", ДанныеИБ.Отбор.Период.Значение);
			Отбор.Вставить("Склад",  ДанныеИБ.Отбор.Склад.Значение);
			
			ВыгруженныеДанные = КомпонентыОбмена.ПараметрыКонвертации.ТаблицаИнформативныеОстатки.НайтиСтроки(Отбор);
			
			Если ВыгруженныеДанные.Количество() > 0 Тогда
				ИспользованиеПКО.Очистить();
			Иначе
			
				ВыгруженныеДанные = КомпонентыОбмена.ПараметрыКонвертации.ТаблицаИнформативныеОстатки.Добавить();
				ВыгруженныеДанные.Склад  = ДанныеИБ.Отбор.Склад.Значение;
				ВыгруженныеДанные.Период = ДанныеИБ.Отбор.Период.Значение;	
				
			КонецЕсли;
		КонецЕсли;
	КонецЕсли;
КонецПроцедуры
