Процедура ПОД_Справочник_ФизическиеЛица_Отправка_ПриОбработке(ДанныеИБ, ИспользованиеПКО, КомпонентыОбмена)
	Если ДанныеИБ.ПометкаУдаления Тогда
		УстановитьИспользованиеПКО(ИспользованиеПКО, Ложь);
		Возврат;
	КонецЕсли;
	
	Если ОбщегоНазначения.ПодсистемаСуществует("СтандартныеПодсистемы.ЗащитаПерсональныхДанных") И Не ДанныеИБ.ЭтоГруппа Тогда
		
		МодульЗащитаПерсональныхДанных = ОбщегоНазначения.ОбщийМодуль("ЗащитаПерсональныхДанных");
		Если МодульЗащитаПерсональныхДанных.ЭтоОбъектСоСкрытымиПерсональнымиДанными(ДанныеИБ) Тогда
		
			ИспользованиеПКО.Справочник_ФизическиеЛица_Отправка       = Ложь;
			ИспользованиеПКО.Справочник_ФизическиеЛицаГруппа_Отправка = Ложь;
			
			ШаблонПредупреждения = НСтр("ru = 'Субъект %1 не может быть выгружен,
			|т.к. его персональные данные скрыты.';
			|en = 'Subject %1 cannot be exported
			|as its personal data is hidden.'");
			
			ТекстПредупреждения = СтроковыеФункцииКлиентСервер.ПодставитьПараметрыВСтроку(ШаблонПредупреждения, ДанныеИБ.Ссылка);
			ПредупреждениеПриСинхронизации(КомпонентыОбмена, ДанныеИБ.Ссылка, ТекстПредупреждения);
			
			Возврат;
			
		КонецЕсли;
		
	КонецЕсли;
	 
	ИспользованиеПКО.Справочник_ФизическиеЛица_Отправка       = Не ДанныеИБ.ЭтоГруппа;
	ИспользованиеПКО.Справочник_ФизическиеЛицаГруппа_Отправка = ДанныеИБ.ЭтоГруппа;
	
	ПроверкаЗаполненияРеквизитовОбъектаИБ(ДанныеИБ, КомпонентыОбмена, ИспользованиеПКО);
КонецПроцедуры
