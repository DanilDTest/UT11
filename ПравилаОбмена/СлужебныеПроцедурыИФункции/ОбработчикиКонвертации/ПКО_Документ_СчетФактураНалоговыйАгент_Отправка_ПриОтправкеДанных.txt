Процедура ПКО_Документ_СчетФактураНалоговыйАгент_Отправка_ПриОтправкеДанных(ДанныеИБ, ДанныеXDTO, КомпонентыОбмена, СтекВыгрузки)
	Если СтекВыгрузки.Количество() > 1 Тогда
		Возврат;
	КонецЕсли;
	
	ДанныеXDTO.Вставить("ВидСчетаФактуры", "НалоговыйАгент");
	ДанныеXDTO.Вставить("Выставлен",       Истина);
	
	ДокументыОснования = Новый ТаблицаЗначений();
	ДокументыОснования.Колонки.Добавить("ДокументОснование");
	
	ИмяПКО = ИмяПКОДляОбъектаДанных(КомпонентыОбмена, ДанныеИБ.ДокументОснование, ДанныеИБ.Организация);
	
	СтрокаОснование = ДокументыОснования.Добавить();
	СтрокаОснование.ДокументОснование = Новый Структура("Значение, ИмяПКО",
		ДанныеИБ.ДокументОснование, ИмяПКО);
	
	ДанныеXDTO.Вставить("ДокументыОснования", ДокументыОснования);
	
	ВыгрузитьОтветственноеЛицо(КомпонентыОбмена, ДанныеИБ, ДанныеXDTO, "ГлавныйБухгалтер", Истина);
	ВыгрузитьОтветственноеЛицо(КомпонентыОбмена, ДанныеИБ, ДанныеXDTO, "Руководитель", Истина);
	
	ДанныеXDTO.Вставить("СпособВыставления", "НаБумажномНосителе");
	
	ТабРасшифровкаСуммы = ДанныеИБ.РасшифровкаСуммы.Выгрузить();
	ТабРасшифровкаСуммы.Свернуть("СтавкаНДС");
	Если ТабРасшифровкаСуммы.Количество() = 1 Тогда
		ДанныеXDTO.Вставить("СтавкаНДС", ТабРасшифровкаСуммы[0].СтавкаНДС);
	КонецЕсли;
	
	ВыгрузитьДополнительныеРеквизитыИСведения(КомпонентыОбмена, ДанныеИБ, ДанныеXDTO);
КонецПроцедуры
