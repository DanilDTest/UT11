Процедура ПКО_Справочник_ВидыПодарочныхСертификатов_Получение_ПередЗаписьюПолученныхДанных(ПолученныеДанные, ДанныеИБ, КонвертацияСвойств, КомпонентыОбмена)
	ЗагрузитьДополнительныеСведения(?(ДанныеИБ = Неопределено, ПолученныеДанные.ПолучитьСсылкуНового(), ДанныеИБ.Ссылка), 
									ПолученныеДанные.ДополнительныеСвойства, КомпонентыОбмена);
	
	// В случае наличия объекта в базе он и будет записан (а не ПолученныеДанные).
	// Шапка и табличная часть предварительно переносятся из ПолученныеДанные в ДанныеИБ:
	// шапка - в составе свойств из ПКС, табличная часть - полностью берется из полученных данных.
	Если ДанныеИБ <> Неопределено Тогда
		// Переносим те свойства, которые указаны в ПКС.
		ЗаполнитьСвойстваШапкиОбъекта(КонвертацияСвойств, ПолученныеДанные, ДанныеИБ);
	
		// Табличные части
		//ДанныеИБ.ШаблоныКодовПодарочныхСертификатов.Загрузить(ПолученныеДанные.ШаблоныКодовПодарочныхСертификатов.Выгрузить());
	
		ПолученныеДанные = Неопределено;
		
		Если НЕ ЗначениеЗаполнено(ДанныеИБ.СтатьяДоходов) Тогда
			ДанныеИБ.СтатьяДоходов = ПланыВидовХарактеристик.СтатьиДоходов.ВыручкаОтПродаж;
		КонецЕсли;
	Иначе
		ПолученныеДанные.СтатьяДоходов = ПланыВидовХарактеристик.СтатьиДоходов.ВыручкаОтПродаж;
	КонецЕсли;
КонецПроцедуры
