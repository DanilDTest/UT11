Процедура ПКО_Документ_ЗаказКлиентаПолный_Получение_ПередЗаписьюПолученныхДанных(ПолученныеДанные, ДанныеИБ, КонвертацияСвойств, КомпонентыОбмена)
	ДанныеОбъект = ПолученныеДанные;
	Если ДанныеИБ <> Неопределено Тогда   
	
		ДанныеИБ.Проведен = ПолученныеДанные.Проведен;                                  
	
	
		СвойствоДатаРезерва = ПланыВидовХарактеристик.ДополнительныеРеквизитыИСведения.НайтиПоРеквизиту("Имя", "РезервДоВключительно");
		СтрокаСвойстваОбъекта = ДанныеИБ.ДополнительныеРеквизиты.Найти(СвойствоДатаРезерва, "Свойство");
	
		Если СтрокаСвойстваОбъекта =  Неопределено Тогда 
			СтрокаСвойстваОбъекта = ДанныеИБ.ДополнительныеРеквизиты.Добавить();
			СтрокаСвойстваОбъекта.Свойство = СвойствоДатаРезерва;
		КонецЕсли;
	
		СтрокаСвойстваОбъекта.Значение = ПолученныеДанные.ДополнительныеСвойства.ДатаРезерва;
		ДанныеИБ.Товары.Загрузить(ПолученныеДанные.Товары.Выгрузить());	
	                            
		        
		ОсновнаяПричинаОтмены = "";	                            
		Если ПолученныеДанные.ДополнительныеСвойства.Свойство("ОсновнаяПричинаОтмены") Тогда
			ОсновнаяПричинаОтмены = ПолученныеДанные.ДополнительныеСвойства.ОсновнаяПричинаОтмены;
		КонецЕсли;   
		
		//ПолученныеДанные = Неопределено;
		
		//ДанныеОбъект = ДанныеИБ;
	КонецЕсли;             
	
	Если НЕ ПустаяСтрока(ОсновнаяПричинаОтмены) Тогда  
		
		СвойствоПричинаОтмены = ПланыВидовХарактеристик.ДополнительныеРеквизитыИСведения.НайтиПоРеквизиту("Имя", "ПричинаОтменыБУС"); 
		
		Если ЗначениеЗаполнено(СвойствоПричинаОтмены) 
			И НЕ ЗначениеЗаполнено(УправлениеСвойствами.ЗначениеСвойства(ДанныеОбъект.Ссылка, СвойствоПричинаОтмены)) Тогда  	
		
			МнЗ = РегистрыСведений.ДополнительныеСведения.СоздатьМенеджерЗаписи();
			МнЗ.Объект = ДанныеОбъект.Ссылка;
			МнЗ.Свойство = СвойствоПричинаОтмены;   
			МнЗ.Значение = ОсновнаяПричинаОтмены;
			МнЗ.Записать();
		КонецЕсли;
		 	
	
	КонецЕсли; 
	                     
	                     
	ДанныеОбъект.СкидкиРассчитаны = Истина;
КонецПроцедуры
