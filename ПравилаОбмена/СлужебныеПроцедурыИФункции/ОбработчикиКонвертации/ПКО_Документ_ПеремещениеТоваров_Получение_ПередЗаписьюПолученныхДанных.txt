Процедура ПКО_Документ_ПеремещениеТоваров_Получение_ПередЗаписьюПолученныхДанных(ПолученныеДанные, ДанныеИБ, КонвертацияСвойств, КомпонентыОбмена)
	//ЗагрузитьДополнительныеСведения(?(ДанныеИБ = Неопределено, ПолученныеДанные.ПолучитьСсылкуНового(), ДанныеИБ.Ссылка), 
	//							ПолученныеДанные.ДополнительныеСвойства, КомпонентыОбмена);
	
	//ДанныеДляЗаписиВИБ = ?(ДанныеИБ = Неопределено, ПолученныеДанные, ДанныеИБ);
	
	Если ДанныеИБ = Неопределено 
		ИЛИ ДанныеИБ.Статус = Перечисления.СтатусыПеремещенийТоваров.Принято Тогда
		ПолученныеДанные.Статус = Перечисления.СтатусыПеремещенийТоваров.Принято; 	
	КонецЕсли;       
	
	
	Если ЗначениеЗаполнено(ПолученныеДанные.ЗаказНаПеремещение) Тогда
		ПолученныеДанные.ПеремещениеПоЗаказам = Истина;          
	КонецЕсли;
	                   
	                   
	Если НЕ ДанныеИБ = Неопределено Тогда                           
		// Восстанавливаем "затертые" данные
		//Товары
		МассивКлючевыхПолей = Новый Массив;
		МассивКлючевыхПолей.Добавить("Номенклатура");
	
		ЗаполнитьТабличнуюЧастьОбъектаНачальнымиДанными(
			ПолученныеДанные.Товары,
			ДанныеИБ.Товары,
			МассивКлючевыхПолей,
			"RM_ЦенаРеализации");   
			
		Если ЗначениеЗаполнено(ДанныеИБ.СпособДоставки) Тогда
			ПолученныеДанные.СпособДоставки = ДанныеИБ.СпособДоставки;
		КонецЕсли;       
		
		Если ЗначениеЗаполнено(ДанныеИБ.Ответственный) Тогда
			ПолученныеДанные.Ответственный = ДанныеИБ.Ответственный;
		КонецЕсли;  
		
		Если ЗначениеЗаполнено(ДанныеИБ.RM_РасходныйОрдер) Тогда
			ПолученныеДанные.RM_РасходныйОрдер = ДанныеИБ.RM_РасходныйОрдер;
		КонецЕсли; 
				
	КонецЕсли;
КонецПроцедуры
