Процедура ПКО_Документ_ПКОРасчетыСКонтрагентами_Отправка_ПриОтправкеДанных(ДанныеИБ, ДанныеXDTO, КомпонентыОбмена, СтекВыгрузки)
	Если СтекВыгрузки.Количество() > 1 Тогда
		Возврат;
	КонецЕсли;
	
	КонтрагентСсылка = ДанныеИБ.Контрагент;
	Если ДанныеИБ.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ПоступлениеДенежныхСредствИзДругойОрганизации
		ИЛИ ДанныеИБ.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ВозвратДенежныхСредствОтДругойОрганизации Тогда
		КонтрагентСсылка = неопределено;
		ОрганизацияКонтрагента = ОбщегоНазначения.ЗначениеРеквизитаОбъекта(ДанныеИБ.КассаОтправитель, "Владелец");
		КонтрагентСсылка = КонтрагентИзОрганизации(ОрганизацияКонтрагента, КомпонентыОбмена);
		ДанныеXDTO.Вставить("Контрагент", КонтрагентСсылка);
	Иначе
		ДанныеXDTO.Вставить("Контрагент", ДанныеИБ.Контрагент);
	КонецЕсли;
	
	ВыгрузитьПодразделениеИзРеквизитаДокумента(КомпонентыОбмена, ДанныеИБ, ДанныеXDTO, "Касса");
	ВыгрузитьОтветственноеЛицо(КомпонентыОбмена, ДанныеИБ, ДанныеXDTO, "ГлавныйБухгалтер");
	ВыгрузитьДополнительныеРеквизитыИСведения(КомпонентыОбмена, ДанныеИБ, ДанныеXDTO);
	
	АлгоритмКонвертации = АлгоритмВыгрузкиРасчетыСКонтрагентамиОтправка(ДанныеИБ);
	ДанныеXDTO.Вставить("ВидРасчетов", ВидРасчетовСКонтрагентомПоступление(АлгоритмКонвертации));
	ВыгрузитьРасшифровкуКонтрагенты_ПоступлениеДС(ДанныеИБ, ДанныеXDTO, АлгоритмКонвертации, КомпонентыОбмена);
КонецПроцедуры
