Процедура ПКО_Документ_ПеремещениеТоваров_Получение_ПриКонвертацииДанныхXDTO(ДанныеXDTO, ПолученныеДанные, КомпонентыОбмена)
	СтруктураРеквизитовОбъекта = Новый Структура;
	СтруктураРеквизитовОбъекта.Вставить("RM_КоличествоМест");
	СтруктураРеквизитовОбъекта.Вставить("RM_ТехническоеПеремещение");
	СтруктураРеквизитовОбъекта.Вставить("СтатусПринят");
	СтруктураРеквизитовОбъекта.Вставить("RM_ПеремещениеВДругойМагазин");
	
	СтруктураРеквизитовОбъектаИзДопРеквизитов(ДанныеXDTO,СтруктураРеквизитовОбъекта);
	
	ПолученныеДанные.RM_КоличествоМест = СтруктураРеквизитовОбъекта.RM_КоличествоМест;
	ПолученныеДанные.RM_ТехническоеПеремещение = СтруктураРеквизитовОбъекта.RM_ТехническоеПеремещение;
	ПолученныеДанные.RM_ПеремещениеВДругойМагазин = СтруктураРеквизитовОбъекта.RM_ПеремещениеВДругойМагазин;
	Если СтруктураРеквизитовОбъекта.СтатусПринят <> Неопределено 
		И СтруктураРеквизитовОбъекта.СтатусПринят Тогда
		ПолученныеДанные.Статус = Перечисления.СтатусыПеремещенийТоваров.Принято;
	КонецЕсли;
	
	ПолученныеДанные.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ПеремещениеТоваров;
	ПолученныеДанные.СпособДоставки = Перечисления.СпособыДоставки.Самовывоз;
	
	ЗагрузитьДополнительныеРеквизиты(ПолученныеДанные, ДанныеXDTO, КомпонентыОбмена);
	
	Если ДанныеXDTO.Свойство("Товары")
		И ДанныеXDTO.Товары.Колонки.Найти("ПеремещениеПодДеятельность") <> Неопределено Тогда
		ПеремещениеПодДеятельность = ДанныеXDTO.Товары[0].ПеремещениеПодДеятельность;
		Если ЗначениеЗаполнено(ПеремещениеПодДеятельность) Тогда
			ПолученныеДанные.ДополнительныеСвойства.Вставить("ПеремещениеПодДеятельность", ПеремещениеПодДеятельность);
		КонецЕсли;
	КонецЕсли;
	
	#Область Товары
	Если ДанныеXDTO.Свойство("Товары") Тогда
		ПравилаЗаполнения = Новый Соответствие;
		ПравилаЗаполнения.Вставить("Номенклатура", "Номенклатура");   
		ПравилаЗаполнения.Вставить("КодСтроки", "КодСтроки");
		ПравилаЗаполнения.Вставить("Количество",   "Количество");
		Если ЗначениеФО("ИспользоватьХарактеристикиНоменклатуры", КомпонентыОбмена) Тогда
			ПравилаЗаполнения.Вставить("Характеристика",     "Характеристика");
		КонецЕсли;
		Если ЗначениеФО("ИспользоватьУпаковкиНоменклатуры", КомпонентыОбмена) Тогда
			ПравилаЗаполнения.Вставить("Упаковка",           "Упаковка");
			ПравилаЗаполнения.Вставить("КоличествоУпаковок", "КоличествоУпаковок");
		КонецЕсли;
		Если ЗначениеФО("ИспользоватьСерииНоменклатуры", КомпонентыОбмена) Тогда
			ПравилаЗаполнения.Вставить("Серия",              "Серия");
		КонецЕсли;
		
		
		МассивСтрокТовары = Новый Массив;
		Для Каждого Строка Из ДанныеXDTO.Товары Цикл
			СтруктураДанныхСтроки = ДанныеКоллекцииВВидеСтруктуры(Строка, ПравилаЗаполнения);
			МассивСтрокТовары.Добавить(СтруктураДанныхСтроки);
		КонецЦикла;
		ПолученныеДанные.ДополнительныеСвойства.Вставить("Товары", МассивСтрокТовары);
	КонецЕсли;
	#КонецОбласти
	
	#Область ШтрихкодыУпаковок
	
	Если ДанныеXDTO.Свойство("АкцизныеМарки") Тогда
	ПравилаЗаполнения = Новый Соответствие;
	ПравилаЗаполнения.Вставить("ШтрихкодУпаковки", "ШтрихкодУпаковки");
	
	МассивСтрокШтрихкодыУпаковок = Новый Массив;
	Для Каждого Строка Из ДанныеXDTO.АкцизныеМарки Цикл
		СтруктураДанныхСтроки = ДанныеКоллекцииВВидеСтруктуры(Строка, ПравилаЗаполнения);
		МассивСтрокШтрихкодыУпаковок.Добавить(СтруктураДанныхСтроки);
	КонецЦикла;
	ПолученныеДанные.ДополнительныеСвойства.Вставить("RM_ШтрихкодыУпаковок", МассивСтрокШтрихкодыУпаковок);
	КонецЕсли;
	#КонецОбласти   
	  
	  
	#Область ПодарочныеСертификаты
	  
	МассивСтрокПодарочныеСертификаты = Новый Массив;
	
	Если ДанныеXDTO.Свойство("ПодарочныеСертификаты") Тогда
		ПравилаЗаполнения = Новый Соответствие;
		ПравилаЗаполнения.Вставить("ПодарочныйСертификат", "ПодарочныйСертификат");
	
		Для Каждого Строка Из ДанныеXDTO.ПодарочныеСертификаты Цикл
			СтруктураДанныхСтроки = ДанныеКоллекцииВВидеСтруктуры(Строка, ПравилаЗаполнения);
			МассивСтрокПодарочныеСертификаты.Добавить(СтруктураДанныхСтроки);
		КонецЦикла;
	КонецЕсли;     
	
	ПолученныеДанные.ДополнительныеСвойства.Вставить("RM_ПодарочныеСертификаты", МассивСтрокПодарочныеСертификаты);
	#КонецОбласти
КонецПроцедуры
