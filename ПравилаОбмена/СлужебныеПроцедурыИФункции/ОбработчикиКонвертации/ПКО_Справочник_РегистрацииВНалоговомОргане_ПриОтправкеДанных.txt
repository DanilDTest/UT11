Процедура ПКО_Справочник_РегистрацииВНалоговомОргане_ПриОтправкеДанных(ДанныеИБ, ДанныеXDTO, КомпонентыОбмена, СтекВыгрузки)
	Если СвойствоФорматаОбмена(КомпонентыОбмена, "Справочник.РегистрацииВНалоговомОргане.КлючевыеСвойства.Организация")
		И СтекВыгрузки.Количество() = 1 Тогда	
		ДанныеXDTO.КлючевыеСвойства.Вставить("Организация", Новый Структура("Значение, ИмяПКО", ДанныеИБ.Владелец, "Справочник_Организации_Отправка"));
	Иначе
		ДанныеXDTO.Вставить("Организация", Новый Структура("Значение, ИмяПКО", ДанныеИБ.Владелец, "Справочник_Организации_Отправка"));
	КонецЕсли;
	
	Если СтекВыгрузки.Количество() > 1 Тогда
		НаименованиеОбособленногоПодразделения = Неопределено;
		Если Не ДанныеXDTO.Свойство("НаименованиеОбособленногоПодразделения", НаименованиеОбособленногоПодразделения)
			Или Не ЗначениеЗаполнено(НаименованиеОбособленногоПодразделения) Тогда
			
			ДанныеXDTO.Вставить("НаименованиеОбособленногоПодразделения", ДанныеИБ.НаименованиеИФНС);
		КонецЕсли; 
	
		Возврат;
	КонецЕсли;
	
	НаименованиеОбособленногоПодразделения = Неопределено;
	Если Не ДанныеXDTO.КлючевыеСвойства.Свойство("НаименованиеОбособленногоПодразделения", НаименованиеОбособленногоПодразделения)
		Или Не ЗначениеЗаполнено(НаименованиеОбособленногоПодразделения) Тогда
		
		ДанныеXDTO.КлючевыеСвойства.Вставить("НаименованиеОбособленногоПодразделения", ДанныеИБ.НаименованиеИФНС);
	КонецЕсли;
	
	ИмяПКОПредставитель = "Справочник_Контрагенты";
	Если ТипЗнч(ДанныеИБ.Представитель) = Тип("СправочникСсылка.ФизическиеЛица") Тогда
		ИмяПКОПредставитель = "Справочник_ФизическиеЛица_Отправка";
	КонецЕсли;
	ДанныеXDTO.Вставить("Представитель", Новый Структура("Значение, ИмяПКО", ДанныеИБ.Представитель, ИмяПКОПредставитель));
	
	Если ЗначениеЗаполнено(ДанныеИБ.Доверенность) Тогда
		Если ЭтоУТ() Тогда
			ДанныеXDTO.Вставить("Доверенность", ДанныеИБ.Доверенность);
		КонецЕсли;
	КонецЕсли;
КонецПроцедуры
