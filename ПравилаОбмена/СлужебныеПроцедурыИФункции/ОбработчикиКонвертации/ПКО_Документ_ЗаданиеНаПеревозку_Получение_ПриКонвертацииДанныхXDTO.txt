Процедура ПКО_Документ_ЗаданиеНаПеревозку_Получение_ПриКонвертацииДанныхXDTO(ДанныеXDTO, ПолученныеДанные, КомпонентыОбмена)
	#Область Маршрут
	Если ДанныеXDTO.Свойство("Маршрут") Тогда
		ПравилаЗаполнения = Новый Соответствие;
		ПравилаЗаполнения.Вставить("RM_ДоговорПеревозчика", "RM_ДоговорПеревозчика");
		ПравилаЗаполнения.Вставить("RM_НомерЗаявки", "RM_НомерЗаявки");
		ПравилаЗаполнения.Вставить("Адрес", "Адрес");
		ПравилаЗаполнения.Вставить("АдресЗначение", "АдресЗначение");
		ПравилаЗаполнения.Вставить("АдресЗначенияПолей", "АдресЗначенияПолей");
		ПравилаЗаполнения.Вставить("Вес", "Вес");
		ПравилаЗаполнения.Вставить("ВремяПо", "ВремяПо");   
		ПравилаЗаполнения.Вставить("ВремяС", "ВремяС");
		ПравилаЗаполнения.Вставить("ДополнительнаяИнформация", "ДополнительнаяИнформация");
		ПравилаЗаполнения.Вставить("Доставлено", "Доставлено"); 
	    ПравилаЗаполнения.Вставить("Зона", "Зона");
		ПравилаЗаполнения.Вставить("КлючСвязи", "КлючСвязи");
		
			
		
		МассивСтрокМаршурт = Новый Массив;
		Для Каждого Строка Из ДанныеXDTO.Маршрут Цикл
			СтруктураДанныхСтроки = ДанныеКоллекцииВВидеСтруктуры(Строка, ПравилаЗаполнения);
			МассивСтрокМаршурт.Добавить(СтруктураДанныхСтроки);
		КонецЦикла;
		ПолученныеДанные.ДополнительныеСвойства.Вставить("Маршрут", МассивСтрокМаршурт);
	КонецЕсли;      
	
	#КонецОбласти     
	
	
	#Область УпаковочныеЛисты
	Если ДанныеXDTO.Свойство("УпаковочныеЛисты") Тогда
		ПравилаЗаполнения = Новый Соответствие;
		ПравилаЗаполнения.Вставить("Исполнитель", "Исполнитель");
		ПравилаЗаполнения.Вставить("УпаковочныйЛист", "УпаковочныйЛист");
		ПравилаЗаполнения.Вставить("ЭтоПопутныйГруз", "ЭтоПопутныйГруз");
		
			
		
		МассивСтрокУпаковочныеЛисты = Новый Массив;
		Для Каждого Строка Из ДанныеXDTO.УпаковочныеЛисты Цикл
			СтруктураДанныхСтроки = ДанныеКоллекцииВВидеСтруктуры(Строка, ПравилаЗаполнения);
			МассивСтрокУпаковочныеЛисты.Добавить(СтруктураДанныхСтроки);
		КонецЦикла;
		ПолученныеДанные.ДополнительныеСвойства.Вставить("RM_УпаковочныеЛисты", МассивСтрокУпаковочныеЛисты);
	КонецЕсли;      
	
	#КонецОбласти
	
	                       
	
	#Область ВложенныеЗадания
	Если ДанныеXDTO.Свойство("ВложенныеЗадания") Тогда
	
		ПравилаЗаполнения = Новый Соответствие;
		ПравилаЗаполнения.Вставить("ЗаданиеНаПеревозку", "ЗаданиеНаПеревозку");
		
			
		МассивСтрокВложенныеЗадания = Новый Массив;
		Для Каждого Строка Из ДанныеXDTO.ВложенныеЗадания Цикл
			СтруктураДанныхСтроки = ДанныеКоллекцииВВидеСтруктуры(Строка, ПравилаЗаполнения);
			МассивСтрокВложенныеЗадания.Добавить(СтруктураДанныхСтроки);
		КонецЦикла;
		ПолученныеДанные.ДополнительныеСвойства.Вставить("RM_ВложенныеЗадания", МассивСтрокВложенныеЗадания);
	КонецЕсли;      
	
	#КонецОбласти  
	
	Если ДанныеXDTO.Свойство("Приоритет") Тогда
	 	ПолученныеДанные.Приоритет = ПолучитьПриоритетПоНаименованию(ДанныеXDTO.Приоритет);
	КонецЕсли;
	
	Если ДанныеXDTO.Свойство("НаименованиеГруза") Тогда
		ПолученныеДанные.RM_НаименованиеГруза = ПолучитьНаименованиеГрузаПоНаименованию(ДанныеXDTO.НаименованиеГруза);
	КонецЕсли;           
	
	
	Если ДанныеXDTO.Свойство("ТранспортноеСредство") Тогда
	
			Если ЗначениеЗаполнено(ДанныеXDTO.ТранспортноеСредство) 
				И ТипЗнч(ДанныеXDTO.ТранспортноеСредство) = Тип("Структура") И ДанныеXDTO.ТранспортноеСредство.Свойство("Ссылка") Тогда
				
				ИмяЗначения = ДанныеXDTO.ТранспортноеСредство.Ссылка.ТипЗначенияXDTO.Имя; 
				ИмяПКО = "";
				               
				//ЗаписьЖурналаРегистрации("Отладочное сообщение", УровеньЖурналаРегистрации.Предупреждение,,, СтрШаблон("%1", ИмяЗначения));			               
				Если ИмяЗначения = "СправочникСсылка.ТранспортныеСредства" Тогда
					ИмяПКО = "Справочник_ТранспортныеСредства";
				ИначеЕсли ИмяЗначения = "СправочникСсылка.ТипыТранспортныхСредств" Тогда 
					ИмяПКО = "ТипыТранспортныхСредств";
				КонецЕсли;    
				
		 
				Если НЕ ИмяПКО = "" Тогда
					ТС = RM_ОбменДаннымиXDTOСервер.СтруктураОбъектаXDTOВДанныеИБ(КомпонентыОбмена,
				        ДанныеXDTO.ТранспортноеСредство,
				        RM_ОбменДаннымиXDTOСервер.ПКОПоИмени(КомпонентыОбмена, ИмяПКО), 
				        "ПолучитьСсылку");   
				        
				    ПолученныеДанные.ТранспортноеСредство = ТС; 
				
				КонецЕсли;                                                   
				
			КонецЕсли;
	 КонецЕсли;
КонецПроцедуры
