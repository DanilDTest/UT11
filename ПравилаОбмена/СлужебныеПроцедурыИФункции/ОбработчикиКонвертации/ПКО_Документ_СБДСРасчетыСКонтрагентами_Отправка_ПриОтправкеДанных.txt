Процедура ПКО_Документ_СБДСРасчетыСКонтрагентами_Отправка_ПриОтправкеДанных(ДанныеИБ, ДанныеXDTO, КомпонентыОбмена, СтекВыгрузки)
	Если СтекВыгрузки.Количество() > 1 Тогда
		Возврат;
	КонецЕсли;
	
	ВыгрузитьПодразделениеИзРеквизитаДокумента(КомпонентыОбмена, ДанныеИБ, ДанныеXDTO, "БанковскийСчет");
	ВыгрузитьДополнительныеРеквизитыИСведения(КомпонентыОбмена, ДанныеИБ, ДанныеXDTO);
	
	Если ДанныеИБ.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ОплатаДенежныхСредствВДругуюОрганизацию
		Или ДанныеИБ.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ВозвратДенежныхСредствВДругуюОрганизацию Тогда
		
		ДанныеКонтрагента = ПолучитьДанныеКонтрагентаПоБанкСчетуОрганизации(ДанныеИБ.БанковскийСчетПолучатель, КомпонентыОбмена);
		ДанныеXDTO.Вставить("Контрагент",     ДанныеКонтрагента.Контрагент);
		ДанныеXDTO.Вставить("БанковскийСчет", ДанныеКонтрагента.БанковскийСчетКонтрагента);
	
		КонтрагентСсылка = ДанныеКонтрагента.Контрагент;
		
	Иначе
		
		ДанныеXDTO.Вставить("БанковскийСчет", ДанныеИБ.БанковскийСчетКонтрагента);
		ДанныеXDTO.Вставить("Контрагент",     ДанныеИБ.Контрагент);
		
		КонтрагентСсылка = ДанныеИБ.Контрагент;
		
	КонецЕсли;
	
	ЗаполнитьДанныеВходящегоДокументаСБДС(ДанныеИБ, ДанныеXDTO);
	
	ДанныеШапки = ДанныеИБ.ДополнительныеСвойства.ДанныеШапки;
	ДанныеXDTO.Вставить("ВидРасчетов", ДанныеШапки.ВидРасчетов);
	
	Если ВерсияФорматаЧислом(КомпонентыОбмена.ВерсияФорматаОбмена) >= ВерсияФорматаЧислом("1.7")
		И ЗначениеЗаполнено(ДанныеИБ.ЗаявкаНаРасходованиеДенежныхСредств) Тогда
		ДанныеXDTO.Вставить("ЗаявкаНаРасходДенежныхСредств", ДанныеИБ.ЗаявкаНаРасходованиеДенежныхСредств);
	КонецЕсли;
	
	ВыгрузитьРасшифровкуКонтрагенты_СписаниеДС(ДанныеИБ, ДанныеXDTO, КонтрагентСсылка, КомпонентыОбмена);
КонецПроцедуры
